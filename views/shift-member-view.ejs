<%- include("partials/header") %> <%- include("partials/navbar") %>

<div class="content">
  <nav class="mb-2" aria-label="breadcrumb">
    <ol class="breadcrumb mb-0">
      <li class="breadcrumb-item active">Patrol Report</li>
      <li class="breadcrumb-item active">Shift Member</li>
      <li class="breadcrumb-item active">View</li>
      <li class="breadcrumb-item active"><%= topNav %></li>
    </ol>
  </nav>

  <div class="mb-9">
    <div
      id="projectSummary"
      data-list='{"valueNames":["shift","date","shiftMember","startShift","endShift","status"],"page":6,"pagination":true}'
    >
      <div class="row mb-4 gx-6 gy-3 align-items-center">
        <div class="col-auto">
          <h2 class="mb-0">
            Shift Member Patrol Report<span class="fw-normal text-700 ms-3"
              >(<%= totalReports %>)</span
            >
          </h2>
        </div>
      </div>
      <div class="row g-3 justify-content-between align-items-end mb-4">
        <div class="col-12 col-sm-auto">
          <ul class="nav nav-links mx-n2">
            <li class="nav-item"shift-member>
              <a
                class="nav-link px-2 py-1 <%= classActive1 %>"
                aria-current="page"
                href="/shift-member/view"
                ><span>All</span
                ><span class="text-700 fw-semi-bold"
                  >(<%= totalReports %>)</span
                ></a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link px-2 py-1 <%= classActive2 %>"
                href="/shift-member/view/bmi"
                ><span>Baitul Makmur I</span
                ><span class="text-700 fw-semi-bold"
                  >(<%= amountBMI %>)</span
                ></a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link px-2 py-1 <%= classActive3 %>"
                href="/shift-member/view/bmii"
                ><span>Baitul Makmur II</span
                ><span class="text-700 fw-semi-bold"
                  >(<%= amountBMII %>)</span
                ></a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link px-2 py-1 <%= classActive4 %>"
                href="/shift-member/view/jm"
                ><span>Jamek Mosque</span
                ><span class="text-700 fw-semi-bold">(<%= amountJM %>)</span></a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link px-2 py-1 <%= classActive5 %>"
                href="/shift-member/view/cm"
                ><span>City Mosque</span
                ><span class="text-700 fw-semi-bold">(<%= amountCM %>)</span></a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link px-2 py-1 <%= classActive6 %>"
                href="/shift-member/view/rs"
                ><span>Raudhatul Sakinah</span
                ><span class="text-700 fw-semi-bold">(<%= amountRS %>)</span></a
              >
            </li>
          </ul>
        </div>
        <div class="col-12 col-sm-auto">
          <div class="d-flex align-items-center">
            <div class="search-box me-0">
              <form
                class="position-relative"
                data-bs-toggle="search"
                data-bs-display="static"
              >
                <input
                  class="form-control search-input search"
                  type="search"
                  placeholder="Search reports"
                  aria-label="Search"
                />
                <span class="fas fa-search search-box-icon"></span>
              </form>
            </div>
          </div>
        </div>
      </div>

      <div class="table-responsive scrollbar">
        <table class="table fs--1 mb-0 border-top border-200">
          <thead>
            <tr>
              <th
                class="sort white-space-nowrap align-middle ps-0"
                scope="col"
                data-sort="shift"
                style="width: 20%"
              >
                SHIFT
              </th>
              <th
                class="sort align-middle ps-3"
                scope="col"
                data-sort="date"
                style="width: 20%"
              >
                DATE
              </th>
              <th
                class="sort align-middle ps-3"
                scope="col"
                data-sort="shiftMember"
                style="width: 20%"
              >
                SHIFT MEMBER
              </th>
              <th
                class="sort align-middle ps-3"
                scope="col"
                data-sort="startShift"
                style="width: 20%"
              >
                START SHIFT
              </th>
              <th
                class="sort align-middle ps-3"
                scope="col"
                data-sort="endShift"
                style="width: 12%"
              >
                END SHIFT
              </th>
              <th
                class="sort align-middle text-end"
                scope="col"
                data-sort="status"
                style="width: 20%"
              >
                STATUS
              </th>
              <th
                class="sort align-middle text-end"
                scope="col"
                style="width: 10%"
              ></th>
            </tr>
          </thead>

          <!-- table content -->
          <tbody class="list" id="project-list-table-body">
            <% if (Array.isArray(itemReports) && itemReports.length > 0) { %>
            <!-- table item -->
            <% itemReports.forEach(function (item) { %>
            <tr class="position-static">
              <td
                class="align-middle time white-space-nowrap ps-0 shift py-4"
              >
                <a
                  class="fw-bold fs-0"
                  href="/shift-member/details?id=<%= item.reportId %>"
                  ><%= item.shift %></a
                >
              </td>
              <td class="align-middle white-space-nowrap date ps-3 py-4">
                <p class="mb-0 fs--1 text-900"><%= item.date %></p>
              </td>
              <td class="align-middle white-space-nowrap shiftMember ps-3 py-4">
                <p class="mb-0 fs--1 text-900"><%= item.shiftMember.length %></p>
              </td>
              <td class="align-middle white-space-nowrap startShift ps-3 py-4">
                <p class="mb-0 fs--1 text-900"><%= item.startShift %></p>
              </td>
              <td class="align-middle white-space-nowrap endShift ps-3 py-4">
                <p class="fw-bo text-900 fs--1 mb-0"><%= item.endShift %></p>
              </td>
              <td class="align-middle white-space-nowrap text-end status">
                <span class="badge badge-phoenix badge-phoenix-primary fs--1"
                  ><%= item.status %></span
                >
              </td>
              <td class="align-middle text-end white-space-nowrap pe-0 action">
                <div class="font-sans-serif btn-reveal-trigger position-static">
                  <button
                    class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2"
                    type="button"
                    data-bs-toggle="dropdown"
                    data-boundary="window"
                    aria-haspopup="true"
                    aria-expanded="false"
                    data-bs-reference="parent"
                  >
                    <span class="fas fa-ellipsis-h fs--2"></span>
                  </button>
                  <div class="dropdown-menu dropdown-menu-end py-2">
                    <a class="dropdown-item" href="/shift-member/details?id=<%= item.reportId %>">View</a>
                  </div>
                </div>
              </td>
            </tr>
            <% }) %> <% } else { %>
            <tr>
              <td colspan="7">No patrol reports submitted.</td>
            </tr>
            <% } %>
          </tbody>
        </table>
      </div>
      <div
        class="d-flex flex-wrap align-items-center justify-content-between py-3 pe-0 fs--1 border-bottom border-200"
      >
        <div class="d-flex">
          <p
            class="mb-0 d-none d-sm-block me-3 fw-semi-bold text-900"
            data-list-info="data-list-info"
          ></p>
          <a class="fw-semi-bold" href="#!" data-list-view="*"
            >View all<span
              class="fas fa-angle-right ms-1"
              data-fa-transform="down-1"
            ></span></a
          ><a class="fw-semi-bold d-none" href="#!" data-list-view="less"
            >View Less<span
              class="fas fa-angle-right ms-1"
              data-fa-transform="down-1"
            ></span
          ></a>
        </div>
        <div class="d-flex">
          <button class="page-link" data-list-pagination="prev">
            <span class="fas fa-chevron-left"></span>
          </button>
          <ul class="mb-0 pagination"></ul>
          <button class="page-link pe-0" data-list-pagination="next">
            <span class="fas fa-chevron-right"></span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- toast alert -->
<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 5">
  <div class="d-flex">
    <div
      class="toast <%= toastShow %> align-items-center text-white bg-primary border-0 light"
      role="alert"
      data-bs-autohide="false"
      aria-live="assertive"
      aria-atomic="true"
      id="alertToast"
    >
      <div class="d-flex justify-content-between">
        <div class="toast-body p-3">
          <code class="text-white"><%= toastMsg %></code>
        </div>

        <button
          class="btn ms-2 p-0 btn-close-white"
          type="button"
          data-bs-dismiss="toast"
          aria-label="Close"
        >
          <span class="uil uil-times fs-1"></span>
        </button>
      </div>
    </div>
  </div>
</div>

<%-include("partials/navbar-script.ejs") %> <%-include("partials/footer") %>

<%- include("partials/header") %> <%- include("partials/navbar") %>

<div class="content">
  <!-- Page title -->
  <h2 class="mb-2 lh-sm">Admin Dashboard</h2>
  <p class="text-700 lead mb-5">
    Check all the report progression here
  </p>

  <div class="px-3 mb-5">
    <div class="row justify-content-between">
      <div class="col-6 col-md-4 col-xxl-2 text-center border-translucent border-start-xxl border-end-xxl-0 border-bottom-xxl border-top-xxl border-end border-bottom pb-4 py-xxl-3 "><span class="uil fs-5 lh-1 uil-file-alt text-primary"></span>
        <h1 class="fs-5 pt-3"><%= patrolReport.length + caseReport.length %></h1>
        <p class="fs-9 mb-0">Total Reports</p>
      </div>
      <div class="col-6 col-md-4 col-xxl-2 text-center border-translucent border-start-xxl border-end-xxl-0 border-bottom-xxl border-top-xxl border-end-md border-bottom pb-4 pb-xxl-0 py-xxl-3"><span class="uil fs-5 lh-1 uil-file-export text-info"></span>
        <h1 class="fs-5 pt-3"><%= dutyHandover.length %></h1>
        <p class="fs-9 mb-0">Duty Handover</p>
      </div>
      <div class="col-6 col-md-4 col-xxl-2 text-center border-translucent border-start-xxl border-bottom-xxl border-top-xxl border-bottom border-end border-end-md-0 pb-4 pb-xxl-0 pt-4 pt-md-0 py-xxl-3"><span class="uil fs-5 lh-1 uil-user text-primary"></span>
        <h1 class="fs-5 pt-3"><%= user.length %></h1>
        <p class="fs-9 mb-0">Total Staffs</p>
      </div>
      <div class="col-6 col-md-4 col-xxl-2 text-center border-translucent border-start-xxl border-end-md border-end-xxl-0 border-bottom border-bottom-xxl border-top-xxl pb-4 pt-4 py-xxl-3"><span class="uil fs-5 lh-1 uil-book text-info"></span>
        <h1 class="fs-5 pt-3"><%= shiftMember.length %></h1>
        <p class="fs-9 mb-0">Shift Member Patrol</p>
      </div>
      <div class="col-6 col-md-4 col-xxl-2 text-center border-translucent border-start-xxl border-end border-end-xxl-0 border-bottom-xxl border-top-xxl pb-md-4 pt-4 py-xxl-3"><span class="uil fs-5 lh-1 uil-map-marker text-success"></span>
        <h1 class="fs-5 pt-3"><%= patrolUnit.length %></h1>
        <p class="fs-9 mb-0">Patrol Unit</p>
      </div>
      <div class="col-6 col-md-4 col-xxl-2 text-center border-translucent border-start-xxl border-end-xxl border-bottom-xxl border-top-xxl pb-md-4 pt-4 py-xxl-3"><span class="uil fs-5 lh-1 uil-clock-two text-danger"></span>
        <h1 class="fs-5 pt-3"><%= caseReport.length %></h1>
        <p class="fs-9 mb-0">Case Report</p>
      </div>
    </div>
  </div>

  <div class="row g-0 mb-5">
    <div class="col-12 col-xxl-6">
      <div class="container">
        <div id="myCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel">

          <div class="carousel-inner">
            <div class="carousel-item active">
              <div class="row g-3 mb-5 justify-content-center">
                <div class="col-12">
                  <div class="card p-3 vh-50">
                    <div class="card-title">
                      Example 1
                    </div>
                    <div class="card-body">
                      <!-- Content for Example 2 -->
                    </div>
                  </div>
                </div>
                <!-- Add more cards as needed for each item in the carousel -->
              </div>
            </div>

            <div class="carousel-item ">
              <div class="row g-3 mb-5 justify-content-center">
                <div class="col-12">
                  <div class="card p-3 vh-50">
                    <div class="card-title">
                      Example 2
                    </div>
                    <div class="card-body">
                      <!-- Content for Example 2 -->
                    </div>
                  </div>
                </div>
                <!-- Add more cards as needed for each item in the carousel -->
              </div>
            </div>

            <div class="carousel-item ">
              <div class="row g-3 mb-5 justify-content-center">
                <div class="col-12">
                  <div class="card p-3 vh-50">
                    <div class="card-title">
                      Example 3
                    </div>
                    <div class="card-body">
                      <!-- Content for Example 2 -->
                    </div>
                  </div>
                </div>
                <!-- Add more cards as needed for each item in the carousel -->
              </div>
            </div>

          </div>

          <div class="carousel-indicators">
            <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
          </div>
        </div>
      </div>
    </div>

    <div class="col-12 col-xxl-6">
      <h3>Duty Handover Status</h3>
      <p class="text-700 fs-1">Example</p>

      <div id="pieChart" style="height: 400px;"></div>

      <script>
        $(document).ready(async () => {
          try {
            const response = await $.getJSON('/api/dutyHandovers');
            const data = response;

            // Generate data for the pie chart
            const statusCounts = {
              'Completed': data.completedCount,
              'Incompleted': data.incompletedCount,
            };

            // Create pie chart options
            const chart = echarts.init(document.getElementById('pieChart'));
            const options = {
              tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b} : {c} ({d}%)',
              },
              legend: {
                orient: 'vertical',
                left: 'left',
                data: Object.keys(statusCounts),
              },
              series: [{
                name: 'Status',
                type: 'pie',
                radius: '55%',
                center: ['50%', '60%'],
                data: Object.entries(statusCounts).map(([key, value]) => ({
                  name: key,
                  value,
                })),
                emphasis: {
                  itemStyle: {
                    shadowBlur: 10,
                    shadowOffsetX: 0,
                    shadowColor: 'rgba(0, 0, 0, 0.5)',
                  },
                },
              }, ],
            };

            // Set options and render the chart
            chart.setOption(options);
          } catch (error) {
            console.error('Error fetching data:', error);
          }
        });
      </script>
    </div>
  </div>

  <div class="row g-1 border border-300 rounded-3 p-4 mb-5">
    <div class="col-12 col-xxl-6 vh-50">
      <h3>Shift Member Patrol</h3>
      <p class="text-700 fs-1">Example</p>
    </div>

    <div class="col-12 col-xxl-6 vh-50">
      <h3>Patrol Unit</h3>
      <p class="text-700 fs-1">Example</p>
    </div>

    <div class="col-12 vh-50">
      <h3>Case Report</h3>
      <p class="text-700 fs-1">Example</p>
    </div>
  </div>



</div>

<%- include("partials/navbar-script") %> <%- include("partials/footer") %>